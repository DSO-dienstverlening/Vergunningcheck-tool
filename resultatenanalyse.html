<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Resultaten analyse - Aanpakkertool voor vergunningchecks</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f8f9fa;
      margin: 0;
      padding: 40px;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
	
	.logo {
      position: absolute;
      top: 20px;
      right: 40px;
      width: 140px;
    }

    h1 {
      color: #003366;
      text-align: center;
      margin-bottom: 40px;
    }

    .sectietitel {
      font-weight: bold;
      font-size: 1.2em;
      margin-top: 40px;
      margin-bottom: 20px;
    }

    .bevinding {
      margin-bottom: 20px;
      padding: 16px;
      border-radius: 6px;
      page-break-inside: avoid;
    }

    .green {
      background-color: #f0fdf4;
      border-left: 4px solid #27ae60;
    }

    .orange {
      background-color: #fff4e5;
      border-left: 4px solid #f39c12;
    }

    .red {
      background-color: #fbeaea;
      border-left: 4px solid #c0392b;
    }

    .vraag-titel {
      font-weight: bold;
    }

    .btn {
      display: inline-block;
      margin-top: 30px;
      margin-right: 10px;
      background-color: #003366;
      color: white;
      padding: 10px 20px;
      border-radius: 6px;
      text-decoration: none;
    }

    .btn:hover {
      background-color: #00509e;
    }
	
	.result-container {
			background-color: #e6f0fa;
			border-radius: 12px;
			padding: 24px;
			margin-top: 40px;
			margin-bottom: 40px;
		}
	
  </style>
</head>
<body>

<div class="sidebar-logo">
    <img src="Logo_aanpakkertool_voor_vergunningchecks.png" alt="Aanpakkertool logo">
</div>

<div class="container" id="pdf-content">
  <h1>Resultaten</h1>

        
        <p></p>
		
		<p>U kunt nagaan op welke onderdelen een beslisboom aangepast kan worden. Op deze manier kunt u de dienstverlening aan initiatiefnemers naar een hoger niveau brengen.</p>  
       

  <div class="result-container">
  <div class="sectietitel">De volgende vragen zijn op orde:</div>
  <div id="groenSectie"></div>
</div>

<div class="result-container">
  <div class="sectietitel">De volgende vragen betreffen aandachtspunten:</div>
  <div id="oranjeSectie"></div>
</div>

<div class="result-container">
  <div class="sectietitel">De volgende vragen betreffen verbeterpunten:</div>
  <div id="roodSectie"></div>
</div>



  
	<p><strong>Organisatorische randvoorwaarden voor het verbeteren van beslisbomen.</strong></p>
	<p>Het verbeteren van beslisbomen in de vergunningcheck binnen het Digitaal Stelsel Omgevingswet is natuurlijk niet alleen een kwestie van inhoud, maar ook van organisatie, samenwerking en middelen. Om hier structureel mee aan de slag te kunnen gaan, zijn de volgende randvoorwaarden van belang:</p>
	
	<ul style="text-align: left; line-height: 1.6;">
	<li><strong>Capaciteit:</strong> Is er capaciteit beschikbaar binnen uw organisatie? Denk aan regelanalisten en juridische medewerkers. Om een compleet beeld te kunnen krijgen van de verbeteropgave is het raadzaam om de 10 meest gekozen activiteiten en werkzaamheden te analyseren aan de hand van deze richtlijn.</li>
	<li><strong>Financiële middelen:</strong> Zijn er voldoende financiële middelen beschikbaar om capaciteit in te schakelen?</li>
	<li><strong>Kennis:</strong> Is er voldoende kennis aanwezig binnen de organisatie om beslisbomen op te stellen of te verbeteren? Denk aan kennis over toepasbare regels, werking van het DSO en wetgeving)</li>
	<li><strong>Externe overlegstructuren:</strong> Is er een overlegstructuur met andere bestuurslagen, zoals buurgemeenten, Rijk, Provincie, Waterschap, Omgevingsdienst)?</li>
	<li><strong>Interne samenwerking:</strong> Is er goede interne afstemming tussen de betrokken teams in de VTH en planketen? Afstemming tussen beleid, uitvoering, juridische zaken en ICT is van cruciaal belang.</li>
	<li><strong>Testpanel:</strong> Beschikt u over een testpanel om de werking van vragenbomen te kunnen testen?</li>
	<li><strong>Monitoring:</strong> Komen er nog vragen binnen van initiatiefnemers die vastlopen? Komen de juiste meldingen of vergunningaanvragen binnen?</li>
	<li><strong>Beheer en onderhoud</strong>: van de beslisbomen</li> 
	</ul>
	
	<p>Deze factoren bepalen of er daadwerkelijk verbeteringen kunnen worden doorgevoerd in de toepasbare regels en de werking van beslisbomen.</p>
	
	<p><strong>Nog drie laatste tips:</strong></p>
	
	<ul style="text-align: left; line-height: 1.6;">
	<li>Probeer het doorlopen van de vergunningcheck niet langer te laten duren dan circa 20 minuten. Uit gebruikersonderzoeken is gebleken dat mensen vermoeid of gefrustreerd raken naarmate een vragenlijst langer duurt. De foutmarge neemt exponentieel toe waarmee de uitkomst van de vergunningcheck als minder betrouwbaar mag worden beschouwd; </li>
	<li>Duurt het doorlopen van een vergunningcheck veel langer dan circa 20 minuten dan geldt de aanbeveling om te overwegen om op een andere manier informatie beschikbaar te stellen. Dit kan bijvoorbeeld via de website van uw bevoegd gezag, of via telefonisch contact.</li>
	<li>Blijf denken vanuit het perspectief van de initiatiefnemer!</li> </ul>

	<div id="knoppen">
        <a class="btn" href="analyse2.html">Terug</a>
        <a class="btn" href="#" id="downloadBtn">Download als pdf.</a>
        <a class="btn" href="eindpagina.html">Afsluiten</a>
	</div>	
</div>


<script>
  const vragen = {
    vraag1: "In welke mate worden de belangrijkste discriminerende vragen in de beslisboom eerst gesteld?",
    vraag2: "In hoeverre bevat de beslisboom vragen die niet relevant zijn voor de uitkomst (vergunningplicht-meldplicht-informatieplicht)?",
    vraag3: "In welke mate is Geo gekoppeld aan deze beslisboom?",
    vraag4: "In welke mate bevat de vragenboom vragen welke ook kunnen worden uitgesplitst in meerdere vragen zodat deze voor de incidentele gebruiker makkelijker te begrijpen zijn?",
    vraag5: "In welke mate is er gebruik gemaakt van illustraties om vragen te verduidelijken?",
    vraag6: "In hoeverre wordt er gebruik gemaakt van B1-taalgebruik?",
    vraag7: "In welke mate worden er moeilijke vaktermen gebruikt in de vragen, zonder dat wordt uitgelegd wat ze betekenen?",
    vraag8: "In hoeverre worden door de verschillende overheden verschillende woorden, termen en definities gebruikt voor dezelfde objecten?",
    vraag9: "Worden er dezelfde woorden gebruikt die bij andere overheden iets anders betekenen?",
    vraag10: "In hoeverre worden door verschillende overheden dezelfde vragen gesteld?",
    vraag11: "In welke mate worden er vragen met open waarden gesteld die ook als multiple-choice vragen zouden kunnen worden gesteld?"
  };

   const antwoordLabels = {
    vraag1: {
      red: "zelden tot nooit",
      orange: "soms / af en toe",
      green: "vaak / regelmatig"
    },
    vraag2: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
    },
    vraag3: {
      red: "zelden tot nooit",
      orange: "soms / af en toe",
      green: "vaak / regelmatig"
    },
    vraag4: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
    },
    vraag5: {
      red: "zelden tot nooit",
      orange: "soms / af en toe",
      green: "vaak / regelmatig"
    },
	vraag6: {
      red: "zelden tot nooit",
      orange: "soms / af en toe",
      green: "vaak / regelmatig"
    },
    vraag7: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
    },
    vraag8: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
    },
    vraag9: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
    },
    vraag10: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
	},
    vraag11: {
      green: "zelden tot nooit",
      orange: "soms / af en toe",
      red: "vaak / regelmatig"
    }
  };

  const antwoorden = JSON.parse(localStorage.getItem("analyse")) || {};
  
   const totaalVragen = Object.keys(vragen).length;
  const ingevuld = Object.values(antwoorden).filter(v => v).length;

    const inleidingsParagraaf = document.querySelector("#pdf-content > p");
  inleidingsParagraaf.innerHTML =
    `U heeft <strong>${ingevuld} van de ${totaalVragen}</strong> analysevragen beantwoord. ` +
    `Op basis van uw antwoorden ziet u hieronder waar er voor uw organisatie verbeterkansen liggen bij het gebruik van beslisbomen voor de vergunningcheck.`;

  for (let key in antwoorden) {
    const value = antwoorden[key];
    const tekst = vragen[key] || key;
    const label = antwoordLabels[key]?.[value] || "Onbekend";

    const div = document.createElement("div");
    div.classList.add("bevinding", value); // value is green, orange of red
    div.innerHTML = `<strong>${tekst}</strong><br><em>Uw gegeven antwoord: ${label}</em>`;

    if (value === "green") {
      document.getElementById("groenSectie").appendChild(div);
    } else if (value === "orange") {
      document.getElementById("oranjeSectie").appendChild(div);
    } else if (value === "red") {
      document.getElementById("roodSectie").appendChild(div);
    }
  }
  
  const groenSectie = document.getElementById("groenSectie");
if (!groenSectie.hasChildNodes()) {
  const leeg = document.createElement("p");
  leeg.innerText = "Er zijn geen vragen die op orde zijn.";
  leeg.style.fontStyle = "italic";
leeg.style.color = "#666";
leeg.style.marginTop = "8px";
  groenSectie.appendChild(leeg);
}

const oranjeSectie = document.getElementById("oranjeSectie");
if (!oranjeSectie.hasChildNodes()) {
  const leeg = document.createElement("p");
  leeg.innerText = "Er zijn geen vragen met aandachtspunten.";
  leeg.style.fontStyle = "italic";
leeg.style.color = "#666";
leeg.style.marginTop = "8px";
  oranjeSectie.appendChild(leeg);
}

const roodSectie = document.getElementById("roodSectie");
if (!roodSectie.hasChildNodes()) {
  const leeg = document.createElement("p");
  leeg.innerText = "Er zijn geen vragen met verbeterpunten.";
  leeg.style.fontStyle = "italic";
leeg.style.color = "#666";leeg.style.marginTop = "8px";
  roodSectie.appendChild(leeg);
}
  
</script>
</script>

<script>
document.getElementById("downloadBtn").addEventListener("click", async function () {
    const content = document.getElementById("pdf-content");
    const knoppen = document.getElementById("knoppen");

    // Verberg knoppen uit beeld voor de PDF
    knoppen.style.display = "none";

    // Scroll helemaal naar boven
    window.scrollTo(0, 0);

    // Forceer herflow en wacht kort (layout fix)
    await new Promise(resolve => setTimeout(resolve, 500));

    const opt = {
        margin: 0.3,
        filename: 'Aanpakkertool.analyse.pdf',
        image: { type: 'jpeg', quality: 0.98 },
        html2canvas: { scale: 2, useCORS: true },
        jsPDF: { unit: 'in', format: 'a4', orientation: 'portrait' }
    };

    // Genereer en download de PDF
    html2pdf().set(opt).from(content).save().then(() => {
        // Knoppen terug tonen na genereren
        knoppen.style.display = "block";
    });
});
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>


</body>
</html>
